---
title: |
  ![](https://coes.cl/wp-content/uploads/2025/03/COES_Logo_azul.png){width=25% height=25%}  
  Multilevel Models
author: 
  - Techinical assistant
date: "`r format(Sys.Date(), '%d/%m/%Y')`"
output:
    bookdown::html_document2:
          theme: yeti
          toc: yes
          toc_float: yes
          toc_collapsed: yes
          number_sections: yes
          
          
    
linkcolor: black
urlcolor: blue
execute:
  echo: false
  warning: false
---

```{r packages and data}

# Packages
pacman::p_load(
    tidyverse,
    haven,
    tidylog,
    texreg,
    sjPlot,
    glue
)

# Data
load("../../output/models/250826_results_mm.RData")
```

```{r}
# Create custom names

model_labels <- c("Null", "Individual", "Contextual", "Full", "Interaction")

coef_labels <- c(
  "(Intercept)" = "Constant",
  
  # Social class
  "class_5Higher-grade service class" = "Higher-grade service class",
  "class_5Lower-grade service class"  = "Lower-grade service class",
  "class_5Unskilled workers"          = "Unskilled workers",
  "class_5Retired"                    = "Retired",
  "class_5Unemployed"                 = "Unemployed",
  
  # Controls
  "educ"         = "Years of education",
  "ln_income"    = "Log income",
  "isei"         = "ISEI (occupational status)",
  "age"          = "Age",
  "age_sq"       = "Age squared",
  "sex"          = "Female",
  "homeowner"    = "Homeowner",
  "married"      = "Married",
  "has_children" = "Has children",
  
  # Neighborhood SES
  "nse_barrio_norm" = "Neighborhood SES",
  
  # Interactions
  "class_5Higher-grade service class:nse_barrio_norm" = "Higher-grade service × Neighborhood SES",
  "class_5Lower-grade service class:nse_barrio_norm" = "Lower-grade service × Neighborhood SES",
  "class_5Unskilled workers:nse_barrio_norm"         = "Unskilled workers × Neighborhood SES",
  "class_5Retired:nse_barrio_norm"                   = "Retired × Neighborhood SES",
  "class_5Unemployed:nse_barrio_norm"                = "Unemployed × Neighborhood SES"
)
```

```{r}
# Create wrapper function

tab_mm <- function(model, type = "texreg") {
    if (type == "sjPlot") {
        sjPlot::tab_model(
            model,
            show.ci = FALSE,
            show.se = TRUE,
            pred.labels = coef_labels,
            dv.labels = model_labels
        )
    }

    if (type == "texreg") {
        texreg::htmlreg(
            model,
            custom.coef.names = coef_labels,
            custom.model.names = model_labels,
            bold = 0.05 # p < 0.05 en negrita
        )
    }
}

```

# Introduction

This document...

## ELSOC 2016

::: panel-tabset
# Identification

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$identification)
```

# Friends

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$friends)
```

# Generalized trust

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$gen_trust)
```

# Trust in minorities

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$trust_minorities)
```

# Institutional trust

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$trust_inst)
```

# Interest in politics

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$interest_pol)

```

# Satisfaction with democracy

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$satisf_demo)
```

# Conventional participation

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$conv_particip)
```

# Unconventional participation

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$unconv_particip)
```

# Egalitarianism

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$egalitarianism)
```

# Altruistic behavior

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$altruistic)
```

# Prosocial behavior

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$prosoc_behave)
```

# Democracy support

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$democracy_support)
```

# Justification of violence

```{r results='asis'}
tab_mm(results_mm$elsoc_2016$justif_violence)
```
:::

## ELSOC 2019

::: panel-tabset
# Identification

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$identification)
```

# Friends

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$friends)
```

# Generalized trust

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$gen_trust)
```

# Trust in minorities

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$trust_minorities)
```

# Institutional trust

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$trust_inst)
```

# Interest in politics

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$interest_pol)

```

# Satisfaction with democracy

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$satisf_demo)
```

# Conventional participation

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$conv_particip)
```

# Unconventional participation

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$unconv_particip)
```

# Egalitarianism

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$egalitarianism)
```

# Altruistic behavior

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$altruistic)
```

# Prosocial behavior

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$prosoc_behave)
```

# Democracy support

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$democracy_support)
```

# Justification of violence

```{r results='asis'}
tab_mm(results_mm$elsoc_2019$justif_violence)
```
:::

## ELSOC 2022

::: panel-tabset
# Identification

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$identification)
```

# Friends

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$friends)
```

# Generalized trust

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$gen_trust)
```

# Trust in minorities

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$trust_minorities)
```

# Institutional trust

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$trust_inst)
```

# Interest in politics

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$interest_pol)

```

# Satisfaction with democracy

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$satisf_demo)
```

# Conventional participation

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$conv_particip)
```

# Unconventional participation

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$unconv_particip)
```

# Egalitarianism

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$egalitarianism)
```

# Altruistic behavior

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$altruistic)
```

# Prosocial behavior

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$prosoc_behave)
```

# Democracy support

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$democracy_support)
```

# Justification of violence

```{r results='asis'}
tab_mm(results_mm$elsoc_2022$justif_violence)
```
:::
